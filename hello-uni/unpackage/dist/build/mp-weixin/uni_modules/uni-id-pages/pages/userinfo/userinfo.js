(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["uni_modules/uni-id-pages/pages/userinfo/userinfo"],{1173:function(n,e,t){"use strict";var i=t("72e1"),o=t.n(i);o.a},"72e1":function(n,e,t){},"80f9":function(n,e,t){"use strict";t.r(e);var i=t("941c"),o=t.n(i);for(var u in i)"default"!==u&&function(n){t.d(e,n,(function(){return i[n]}))}(u);e["default"]=o.a},"8c4c":function(n,e,t){"use strict";(function(n){t("cc40"),t("a9ff");i(t("66fd"));var e=i(t("9386"));function i(n){return n&&n.__esModule?n:{default:n}}wx.__webpack_require_UNI_MP_PLUGIN__=t,n(e.default)}).call(this,t("543d")["createPage"])},9386:function(n,e,t){"use strict";t.r(e);var i=t("e7e0"),o=t("80f9");for(var u in o)"default"!==u&&function(n){t.d(e,n,(function(){return o[n]}))}(u);t("1173");var a,r=t("f0c5"),s=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"679692bd",null,!1,i["a"],a);e["default"]=s.exports},"941c":function(n,e,t){"use strict";(function(n,i){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(t("a34a")),u=t("5081");function a(n){return n&&n.__esModule?n:{default:n}}function r(n,e,t,i,o,u,a){try{var r=n[u](a),s=r.value}catch(c){return void t(c)}r.done?e(s):Promise.resolve(s).then(i,o)}function s(n){return function(){var e=this,t=arguments;return new Promise((function(i,o){var u=n.apply(e,t);function a(n){r(u,i,o,a,s,"next",n)}function s(n){r(u,i,o,a,s,"throw",n)}a(void 0)}))}}var c=n.database(),l=(c.collection("uni-id-users"),n.importObject("uni-id-co")),f={computed:{userInfo:function(){return u.store.userInfo}},data:function(){return{univerifyStyle:{authButton:{title:"本机号码一键绑定"},otherLoginButton:{title:"其他号码绑定"}},hasPwd:!1,showLoginManage:!1}},onShow:function(){var n=this;return s(o.default.mark((function e(){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.univerifyStyle.authButton.title="本机号码一键绑定",n.univerifyStyle.otherLoginButton.title="其他号码绑定";case 2:case"end":return e.stop()}}),e)})))()},onLoad:function(n){var e=this;return s(o.default.mark((function t(){var i;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n.showLoginManage&&(e.showLoginManage=!0),t.next=3,l.getAccountInfo();case 3:i=t.sent,console.log("store",u.store.userInfo),console.log("res",i),e.hasPwd=i.isPasswordSet;case 7:case"end":return t.stop()}}),t)})))()},methods:{login:function(){i.navigateTo({url:"/uni_modules/uni-id-pages/pages/login/login-withoutpwd",complete:function(n){console.log(n)}})},logout:function(){u.mutations.logout()},bindMobileSuccess:function(){u.mutations.updateUserInfo()},changePassword:function(){i.navigateTo({url:"/uni_modules/uni-id-pages/pages/userinfo/change_pwd/change_pwd",complete:function(n){console.log(n)}})},bindMobile:function(){this.$refs["bind-mobile-by-sms"].open()},univerify:function(){var n=this;i.login({provider:"univerify",univerifyStyle:this.univerifyStyle,success:function(){var n=s(o.default.mark((function n(e){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:console.log(e.authResult),l.bindMobileByUniverify(e.authResult).then((function(n){console.log(n),u.mutations.updateUserInfo()})).catch((function(n){console.log(n)})).finally((function(n){console.log(n),i.closeAuthView()}));case 2:case"end":return n.stop()}}),n)})));function e(e){return n.apply(this,arguments)}return e}(),fail:function(e){console.log("err",e),"30002"!=e.code&&"30001"!=e.code||n.bindMobileBySmsCode()}})},bindMobileBySmsCode:function(){i.navigateTo({url:"./bind-mobile/bind-mobile"})},setNickname:function(n){console.log("nickname",n),n?(u.mutations.updateUserInfo({nickname:n}),this.$refs.dialog.close()):this.$refs.dialog.open()},deactivate:function(){i.navigateTo({url:"/uni_modules/uni-id-pages/pages/userinfo/deactivate/deactivate"})}}};e.default=f}).call(this,t("a9ff")["default"],t("543d")["default"])},e7e0:function(n,e,t){"use strict";t.d(e,"b",(function(){return o})),t.d(e,"c",(function(){return u})),t.d(e,"a",(function(){return i}));var i={uniIdPagesAvatar:function(){return t.e("uni_modules/uni-id-pages/components/uni-id-pages-avatar/uni-id-pages-avatar").then(t.bind(null,"9298"))},uniList:function(){return t.e("uni_modules/uni-list/components/uni-list/uni-list").then(t.bind(null,"1303"))},uniListItem:function(){return t.e("uni_modules/uni-list/components/uni-list-item/uni-list-item").then(t.bind(null,"6d6b"))},uniPopup:function(){return t.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(t.bind(null,"fe99"))},uniPopupDialog:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog")]).then(t.bind(null,"2b10"))},uniIdPagesBindMobile:function(){return t.e("uni_modules/uni-id-pages/components/uni-id-pages-bind-mobile/uni-id-pages-bind-mobile").then(t.bind(null,"4501"))}},o=function(){var n=this,e=n.$createElement;n._self._c},u=[]}},[["8c4c","common/runtime","common/vendor"]]]);