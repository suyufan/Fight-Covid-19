(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-person-person"],{"00e6":function(e,t,n){"use strict";(function(e){var i=n("4ea4");n("4160"),n("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("96cf");var r=i(n("1da1")),o=n("5081"),a=e.database(),u={data:function(){return{gridList:[{value:"XX",name:"余额"},{value:"XX",name:"本周核酸次数"},{value:"XX",name:"核酸总次数"},{value:"XX",name:"下次检测时间"}],ucenterList:[[{title:"阅读过的帖子",to:"/pages/person/read-news-log/read-news-log",icon:"flag"},{title:"我的积分",to:"",event:"getScore",icon:"paperplane"}],[{title:"问题与反馈",to:"/pages/person/feedback/feedback",icon:"help"},{title:"设置",to:"/pages/person/settings/settings",icon:"gear"}],[{title:"关于",to:"/pages/person/about/about",icon:"info"}]],listStyles:{height:"150rpx",width:"150rpx",border:{color:"#eee",width:"1px",style:"solid",radius:"100%"}}}},onLoad:function(){this.showGraidlist()},computed:{userInfo:function(){return o.store.userInfo},hasLogin:function(){return o.store.hasLogin}},methods:{showGraidlist:function(){var t=this;return(0,r.default)(regeneratorRuntime.mark((function n(){var i,r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=e.importObject("person-grid"),n.next=3,i.showDetail();case 3:r=n.sent,o=r.data,t.gridList.forEach((function(e,t){e.value=o[t]}));case 6:case"end":return n.stop()}}),n)})))()},toUserInfo:function(){console.log("toUserInfo点击了"),uni.navigateTo({url:"/uni_modules/uni-id-pages/pages/userinfo/userinfo"})},ucenterListClick:function(e){!e.to&&e.event&&this[e.event]()},getScore:function(){uni.showModal({title:"积分",content:"当前积分：32分"}),a.collection("uni-id-scores").where('"user_id" == $env.uid').field("score,balance").orderBy("create_date","desc").limit(1).get().then((function(e){console.log("获取积分返回",e)}))}}};t.default=u}).call(this,n("a9ff")["default"])},"11dd":function(e,t,n){"use strict";(function(e){var i=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("96cf");var r=i(n("1da1")),o={name:"cloud-image",emits:["click"],props:{mode:{type:String,default:function(){return"widthFix"}},src:{default:function(){return""}},width:{type:String,default:function(){return"100rpx"}},height:{type:String,default:function(){return"100rpx"}}},watch:{src:{handler:function(t){var n=this;t&&"cloud://"==t.substring(0,8)?e.getTempFileURL({fileList:[t]}).then((function(e){n.cSrc=e.fileList[0].tempFileURL})):this.cSrc=t},immediate:!0}},mounted:function(){return(0,r.default)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{onClick:function(){this.$emit("click")}},data:function(){return{cSrc:!1}}};t.default=o}).call(this,n("a9ff")["default"])},"33ba":function(e,t,n){"use strict";n.r(t);var i=n("9820"),r=n("5a49");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n("baff");var a,u=n("f0c5"),s=Object(u["a"])(r["default"],i["b"],i["c"],!1,null,"3ad70c0d",null,!1,i["a"],a);t["default"]=s.exports},3973:function(e,t,n){"use strict";var i;n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{style:{width:e.width,height:e.height},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.onClick.apply(void 0,arguments)}}},[e.cSrc?n("v-uni-image",{style:{width:e.width,height:e.height},attrs:{src:e.cSrc,mode:e.mode}}):e._e()],1)},o=[]},"4e69":function(e,t,n){e.exports=n.p+"static/img/defaultAvatarUrl.5e667d4a.png"},"4fe2":function(e,t,n){var i=n("24fb"),r=n("1de5"),o=n("6689");t=i(!1);var a=r(o);t.push([e.i,"\nuni-view[data-v-18f5a2a4]{display:flex;box-sizing:border-box;flex-direction:column}uni-page-body[data-v-18f5a2a4]{background-color:#f8f8f8}\n.center[data-v-18f5a2a4]{flex:1;flex-direction:column;background-color:#f8f8f8}.userInfo[data-v-18f5a2a4]{padding:%?20?%;padding-top:50px;background-image:url("+a+");flex-direction:column;align-items:center}.logo-img[data-v-18f5a2a4]{width:%?150?%;height:%?150?%;border-radius:%?150?%}.logo-title[data-v-18f5a2a4]{flex:1;align-items:center;justify-content:space-between;flex-direction:row}.uer-name[data-v-18f5a2a4]{height:%?100?%;line-height:%?100?%;font-size:%?38?%;color:#fff}.center-list[data-v-18f5a2a4]{margin-bottom:%?30?%;background-color:#f9f9f9}.center-list-cell[data-v-18f5a2a4]{width:%?750?%;background-color:#007aff;height:%?40?%}.grid[data-v-18f5a2a4]{background-color:#fff;margin-bottom:6px}.uni-grid .text[data-v-18f5a2a4]{font-size:%?16?%;height:%?20?%;line-height:%?20?%;color:#817f82}.uni-grid .item[data-v-18f5a2a4]  .uni-grid-item__box{justify-content:center;align-items:center}\n/*修改边线粗细示例*/\n.center-list[data-v-18f5a2a4]  .uni-list--border:after{-webkit-transform:scaleY(.2);transform:scaleY(.2);margin-left:%?80?%}.center-list[data-v-18f5a2a4]  .uni-list--border-top,\n.center-list[data-v-18f5a2a4]  .uni-list--border-bottom{display:none}\n.item-footer[data-v-18f5a2a4]{flex-direction:row;align-items:center}.item-footer-text[data-v-18f5a2a4]{color:#999;font-size:%?24?%;padding-right:%?10?%}.item-footer-badge[data-v-18f5a2a4]{width:%?20?%;height:%?20?%;\nborder-radius:50%;\n\n\nbackground-color:#dd524d}.container[data-v-18f5a2a4]{width:100%}.profile[data-v-18f5a2a4]{width:100%}.user-info[data-v-18f5a2a4]{position:absolute;top:100px;left:30px;display:flex;align-items:center}.user-info .name[data-v-18f5a2a4]{display:flex}.content-item[data-v-18f5a2a4]{display:flex;margin:10px;flex-direction:column;border-radius:4px;background-color:#fff;justify-content:space-around}.content-item .title[data-v-18f5a2a4]{padding:15px;color:#5a5b5c;font-size:16px;font-weight:700}.content-show[data-v-18f5a2a4]{display:flex;flex-direction:row;justify-content:space-around;align-items:center}.money-item[data-v-18f5a2a4]{display:flex;flex-direction:column;align-items:center;padding:20px}.service-item[data-v-18f5a2a4]{display:flex;flex-direction:column;align-items:center;padding:20px}.service-item .service-text[data-v-18f5a2a4]{font-size:12px;color:#919293}body.?%PAGE?%[data-v-18f5a2a4]{background-color:#f8f8f8}",""]),e.exports=t},"502b":function(e,t,n){"use strict";var i=n("8604"),r=n.n(i);r.a},5081:function(e,t,n){"use strict";(function(e){var i=n("4ea4");n("4160"),n("b64b"),n("ac1f"),n("1276"),n("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.store=t.mutations=void 0,n("96cf");var r=i(n("1da1")),o=i(n("388a")),a=i(n("e143")),u=e.importObject("uni-id-co"),s=e.database(),c=s.collection("uni-id-users"),d=uni.getStorageSync("uni-id-pages-userInfo")||{};console.log(d);var l={userInfo:d,hasLogin:0!=Object.keys(d).length};console.log("data",l);var f={updateUserInfo:function(){var e=arguments,t=this;return(0,r.default)(regeneratorRuntime.mark((function n(){var i,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=e.length>0&&void 0!==e[0]&&e[0],!i){n.next=5;break}c.where("_id==$env.uid").update(i).then((function(e){console.log(e),e.result.updated?(uni.showToast({title:"更新成功",icon:"none"}),t.setUserInfo(i)):uni.showToast({title:"没有改变",icon:"none"})})),n.next=17;break;case 5:return n.prev=5,n.next=8,c.where("'_id' == $cloudEnv_uid").field("mobile,nickname,user_name,email,avatar_file").get();case 8:r=n.sent,console.log("fromDbData",r.result.data),t.setUserInfo(r.result.data[0]),n.next=17;break;case 13:n.prev=13,n.t0=n["catch"](5),t.setUserInfo({},{cover:!0}),console.error(n.t0.message,n.t0.errCode);case 17:case"end":return n.stop()}}),n,null,[[5,13]])})))()},setUserInfo:function(e){var t=arguments;return(0,r.default)(regeneratorRuntime.mark((function n(){var i,r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i=t.length>1&&void 0!==t[1]?t[1]:{cover:!1},r=i.cover,console.log("set-userInfo",e),o=r?e:Object.assign(h.userInfo,e),h.userInfo=Object.assign({},o),h.hasLogin=0!=Object.keys(h.userInfo).length,console.log("store.userInfo",h.userInfo),uni.setStorage({key:"uni-id-pages-userInfo",data:h.userInfo}),n.abrupt("return",e);case 8:case"end":return n.stop()}}),n)})))()},logout:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u.logout();case 2:uni.removeStorageSync("uni_id_token"),uni.setStorageSync("uni_id_token_expired",0),uni.redirectTo({url:"/".concat(null!==(n=null===(i=o.default.uniIdRouter)||void 0===i?void 0:i.loginPage)&&void 0!==n?n:"uni_modules/uni-id-pages/pages/login/login-withoutpwd")}),uni.$emit("uni-id-pages-logout"),e.setUserInfo({},{cover:!0});case 7:case"end":return t.stop()}}),t)})))()},loginSuccess:function(e){var t=e.showToast,n=void 0===t||t,i=e.toastText,r=void 0===i?"登录成功":i,a=e.autoBack,u=void 0===a||a,s=e.uniIdRedirectUrl,c=void 0===s?"":s;if(console.log({toastText:r,autoBack:u}),n&&uni.showToast({title:r,icon:"none"}),this.updateUserInfo(),uni.$emit("uni-id-pages-login-success"),u){var d=0,l=getCurrentPages();if(l.forEach((function(e,t){"login"==l[l.length-t-1].route.split("/")[3]&&d++})),console.log("判断需要返回几层:",l,d),c)return uni.reLaunch({url:c});if("weixin"==e.loginType)return console.log("window.history",window.history),window.history.go(-3);if(d){var f=o.default.pages[0];return uni.reLaunch({url:"/".concat(f.path)})}uni.navigateBack({delta:d})}}};t.mutations=f;var h=a.default.observable(l);t.store=h}).call(this,n("a9ff")["default"])},"5a49":function(e,t,n){"use strict";n.r(t);var i=n("a5f2"),r=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=r.a},"5ab9":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}));var i={cloudImage:n("ff1d").default,uniGrid:n("33ba").default,uniGridItem:n("e47b").default,uniList:n("1303").default,uniListItem:n("6d6b").default},r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"center"},[i("v-uni-view",{staticClass:"userInfo",on:{"!click":function(t){arguments[0]=t=e.$handleEvent(t),e.toUserInfo.apply(void 0,arguments)}}},[e.hasLogin&&e.userInfo.avatar_file&&e.userInfo.avatar_file.url?i("cloud-image",{attrs:{width:"150rpx",height:"150rpx"}}):i("v-uni-image",{staticClass:"logo-img",attrs:{src:n("4e69")}}),i("v-uni-view",{staticClass:"logo-title"},[e.hasLogin?i("v-uni-text",{staticClass:"uer-name"},[e._v(e._s(e.userInfo.nickname||e.userInfo.username||e.userInfo.mobile))]):i("v-uni-text",{staticClass:"uer-name"},[e._v("您好，住户")])],1)],1),i("uni-grid",{staticClass:"grid",attrs:{column:4,showBorder:!1,square:!0}},e._l(e.gridList,(function(t,n){return i("uni-grid-item",{key:n,staticClass:"item"},[i("v-uni-text",[e._v(e._s(t.value))]),i("v-uni-text",{staticStyle:{"font-size":"12px",color:"#919293"}},[e._v(e._s(t.name))])],1)})),1),e._l(e.ucenterList,(function(t,n){return i("uni-list",{key:n,staticClass:"center-list"},e._l(t,(function(t,n){return i("uni-list-item",{key:n,attrs:{title:t.title,link:!0,rightText:t.rightText,clickable:!0,to:t.to,showExtraIcon:!0,extraIcon:{type:t.icon,color:"#999"}},on:{click:function(n){arguments[0]=n=e.$handleEvent(n),e.ucenterListClick(t)}},scopedSlots:e._u([{key:"footer",fn:function(){return[t.showBadge?i("v-uni-view",{staticClass:"item-footer"},[i("v-uni-text",{staticClass:"item-footer-text"},[e._v(e._s(t.rightText))]),i("v-uni-view",{staticClass:"item-footer-badge"})],1):e._e()]},proxy:!0}],null,!0)})})),1)}))],2)},o=[]},6689:function(e,t,n){e.exports=n.p+"static/img/headers.7816bcbc.png"},"79f6":function(e,t,n){"use strict";n.r(t);var i=n("5ab9"),r=n("ef38");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n("f2cc");var a,u=n("f0c5"),s=Object(u["a"])(r["default"],i["b"],i["c"],!1,null,"18f5a2a4",null,!1,i["a"],a);t["default"]=s.exports},8604:function(e,t,n){var i=n("c236");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("4f06").default;r("17df256e",i,!0,{sourceMap:!1,shadowMode:!1})},8816:function(e,t,n){"use strict";n("4160"),n("a434"),n("a9e3"),n("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={name:"UniGridItem",inject:["grid"],props:{index:{type:Number,default:0}},data:function(){return{column:0,showBorder:!0,square:!0,highlight:!0,left:0,top:0,openNum:2,width:0,borderColor:"#e5e5e5"}},created:function(){this.column=this.grid.column,this.showBorder=this.grid.showBorder,this.square=this.grid.square,this.highlight=this.grid.highlight,this.top=0===this.hor?this.grid.hor:this.hor,this.left=0===this.ver?this.grid.ver:this.ver,this.borderColor=this.grid.borderColor,this.grid.children.push(this),this.width=this.grid.width},beforeDestroy:function(){var e=this;this.grid.children.forEach((function(t,n){t===e&&e.grid.children.splice(n,1)}))},methods:{_onClick:function(){this.grid.change({detail:{index:this.index}})}}};t.default=i},9820:function(e,t,n){"use strict";var i;n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"uni-grid-wrap"},[n("v-uni-view",{ref:"uni-grid",staticClass:"uni-grid",class:{"uni-grid--border":e.showBorder},style:{"border-left-color":e.borderColor},attrs:{id:e.elId}},[e._t("default")],2)],1)},o=[]},a5f2:function(e,t,n){"use strict";n("4160"),n("a9e3"),n("d3b7"),n("e25e"),n("ac1f"),n("25f0"),n("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={name:"UniGrid",emits:["change"],props:{column:{type:Number,default:3},showBorder:{type:Boolean,default:!0},borderColor:{type:String,default:"#D2D2D2"},square:{type:Boolean,default:!0},highlight:{type:Boolean,default:!0}},provide:function(){return{grid:this}},data:function(){var e="Uni_".concat(Math.ceil(1e6*Math.random()).toString(36));return{elId:e,width:0}},created:function(){this.children=[]},mounted:function(){var e=this;this.$nextTick((function(){e.init()}))},methods:{init:function(){var e=this;setTimeout((function(){e._getSize((function(t){e.children.forEach((function(e,n){e.width=t}))}))}),50)},change:function(e){this.$emit("change",e)},_getSize:function(e){var t=this;uni.createSelectorQuery().in(this).select("#".concat(this.elId)).boundingClientRect().exec((function(n){t.width=parseInt((n[0].width-1)/t.column)+"px",e(t.width)}))}}};t.default=i},a877:function(e,t,n){var i=n("d069");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("4f06").default;r("3a088b9c",i,!0,{sourceMap:!1,shadowMode:!1})},b119:function(e,t,n){var i=n("4fe2");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var r=n("4f06").default;r("08221786",i,!0,{sourceMap:!1,shadowMode:!1})},baff:function(e,t,n){"use strict";var i=n("a877"),r=n.n(i);r.a},c236:function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\n/* 水平间距 */\n/* 水平间距 */.uni-grid-item[data-v-4336d7d8]{height:100%;display:flex;cursor:pointer}.uni-grid-item__box[data-v-4336d7d8]{display:flex;width:100%;position:relative;flex:1;flex-direction:column}.uni-grid-item--border[data-v-4336d7d8]{position:relative;z-index:0;border-bottom:1px #d2d2d2 solid;border-right:1px #d2d2d2 solid}.uni-grid-item--border-top[data-v-4336d7d8]{position:relative;border-top:1px #d2d2d2 solid;z-index:0}.uni-highlight[data-v-4336d7d8]:active{background-color:#f1f1f1}',""]),e.exports=t},d069:function(e,t,n){var i=n("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\n/* 水平间距 */\n/* 水平间距 */.uni-grid-wrap[data-v-3ad70c0d]{display:flex;flex:1;flex-direction:column;width:100%}.uni-grid[data-v-3ad70c0d]{display:flex;flex-direction:row;flex-wrap:wrap}.uni-grid--border[data-v-3ad70c0d]{position:relative;z-index:1;border-left:1px #d2d2d2 solid}',""]),e.exports=t},dac8:function(e,t,n){"use strict";var i;n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}));var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.width?n("v-uni-view",{staticClass:"uni-grid-item",style:"width:"+e.width+";"+(e.square?"height:"+e.width:"")},[n("v-uni-view",{staticClass:"uni-grid-item__box",class:{"uni-grid-item--border":e.showBorder,"uni-grid-item--border-top":e.showBorder&&e.index<e.column,"uni-highlight":e.highlight},style:{"border-right-color":e.borderColor,"border-bottom-color":e.borderColor,"border-top-color":e.borderColor},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e._onClick.apply(void 0,arguments)}}},[e._t("default")],2)],1):e._e()},o=[]},e47b:function(e,t,n){"use strict";n.r(t);var i=n("dac8"),r=n("ef67");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n("502b");var a,u=n("f0c5"),s=Object(u["a"])(r["default"],i["b"],i["c"],!1,null,"4336d7d8",null,!1,i["a"],a);t["default"]=s.exports},ef38:function(e,t,n){"use strict";n.r(t);var i=n("00e6"),r=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=r.a},ef67:function(e,t,n){"use strict";n.r(t);var i=n("8816"),r=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=r.a},f2cc:function(e,t,n){"use strict";var i=n("b119"),r=n.n(i);r.a},f887:function(e,t,n){"use strict";n.r(t);var i=n("11dd"),r=n.n(i);for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=r.a},ff1d:function(e,t,n){"use strict";n.r(t);var i=n("3973"),r=n("f887");for(var o in r)"default"!==o&&function(e){n.d(t,e,(function(){return r[e]}))}(o);var a,u=n("f0c5"),s=Object(u["a"])(r["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],a);t["default"]=s.exports}}]);